<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Andreas Happe">
  <title>Web Application Security</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="custom.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Web Application Security</h1>
  <p class="author">Andreas Happe</p>
</section>

<section>
<section id="meta" class="title-slide slide level1">
<h1>Meta</h1>

</section>
<section id="application-security" class="slide level2">
<h2>Application Security</h2>
<blockquote>
<p>Application security (short AppSec) includes all tasks that introduce a secure software development life cycle to development teams. Its final goal is to improve security practices and, through that, to find, fix and preferably prevent security issues within applications. It encompasses the whole application life cycle from requirements analysis, design, implementation, verification as well as maintenance. (<a href="https://en.wikipedia.org/wiki/Application_security">fake wikipedia</a>)</p>
</blockquote>
</section>
<section id="quasi" class="slide level2">
<h2>Quasi</h2>
<ul>
<li>das defensive Gegenst√ºck zur (offensiven) Web-Security Lehrveranstaltung</li>
<li>Left-Shifting Security</li>
</ul>
</section>
<section id="bereiche" class="slide level2">
<h2>Bereiche</h2>
<ul>
<li>Requirements Analysis (Threat Model)</li>
<li>Design</li>
<li>Implementation</li>
<li>Verification</li>
<li>Maintenance</li>
</ul>
</section>
<section id="praxisbeispiel" class="slide level2">
<h2>Praxisbeispiel</h2>
<p>Blog mit JavaScript/Express.js</p>
<ul>
<li>public/private area</li>
<li>Berechtigungssystem</li>
<li>Deployed auf einer public cloud (heroku)</li>
</ul>
</section>
<section id="roadmap" class="slide level2">
<h2>Roadmap</h2>
<ol type="1">
<li>JavaScript</li>
<li>Simple Blog (memory-db)</li>
<li>Tooling (Testing, SAST, deployment)</li>
<li>Extend Blog (database)</li>
<li>Extend Blog (API + OAuth2)</li>
<li>Source Code Reviews</li>
</ol>
</section>
<section id="pr√ºfungsmodus" class="slide level2">
<h2>Pr√ºfungsmodus</h2>
<ul>
<li>Seminararbeit</li>
<li>Umfang: ca. 8 PT
<ul>
<li>3.0 ECTS entsprechen 75h Aufwand, -12h Vorlesung</li>
</ul></li>
<li>Umfang: 20-40 Seiten</li>
</ul>
</section>
<section id="m√∂gliche-themen" class="slide level2">
<h2>M√∂gliche Themen</h2>
<ul>
<li>√Ñhnliches Projekt wie w√§hrend der Vorlesung</li>
<li>Source Code Audit (z.B. unter Verwendung von SAST Tooling)</li>
<li>offen f√ºr Vorschl√§ge (k√∂nnen auch gerne mit der DA was zu tun haben)</li>
</ul>
<p>Bitte initial mit mir abkl√§ren, damit es keine √úberschneidungen gibt.</p>
</section></section>
<section>
<section id="javascript" class="title-slide slide level1">
<h1>Javascript</h1>

</section>
<section id="geschichte" class="slide level2">
<h2>Geschichte</h2>
<table>
<thead>
<tr class="header">
<th>Datum</th>
<th>Event</th>
<th>Bemerkung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1995/1996</td>
<td>Released als Teil von NS2</td>
<td>mehr Scheme als Java</td>
</tr>
<tr class="even">
<td>1996</td>
<td>JScript im IE</td>
<td></td>
</tr>
<tr class="odd">
<td>1997</td>
<td>ECMAScript 1</td>
<td>Versuch der Standardisierung</td>
</tr>
<tr class="even">
<td>2004</td>
<td>IE mit 95% Marktanteil</td>
<td>MS: kein Interesse an Standardisieurng</td>
</tr>
<tr class="odd">
<td>2009</td>
<td>ECMAScript 5</td>
<td>Warum? Chrome</td>
</tr>
</tbody>
</table>
</section>
<section id="geschichte-1" class="slide level2">
<h2>Geschichte</h2>
<table>
<thead>
<tr class="header">
<th>Datum</th>
<th>Event</th>
<th>Bemerkung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2015</td>
<td>ECMAScript 6</td>
<td>Module, Klassen, Arrow-Funktionen, Promises, ..</td>
</tr>
<tr class="even">
<td>2016</td>
<td>ECMAScript 7</td>
<td>async/await</td>
</tr>
<tr class="odd">
<td>..</td>
<td>~ eine j√§hrliche Release</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="historische-auswirkungen" class="slide level2">
<h2>Historische Auswirkungen</h2>
<ul>
<li>single-event loop</li>
</ul>
</section>
<section id="basics" class="slide level2">
<h2>Basics</h2>
<ul>
<li>Gute Quelle: <a href="https://javascript.info">javascript.info</a></li>
<li>Variablen, Schleifen, Ifs</li>
<li>Functions
<ul>
<li>Funktionen als Parameter</li>
<li>stabby functions (anonyme Funktionen)</li>
</ul></li>
<li>Collections</li>
</ul>
</section>
<section id="strict-mode" class="slide level2">
<h2>Strict Mode</h2>
<ul>
<li>Seit ECMAScript 5</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">Mozilla Dokumentation</a></li>
<li>‚Äústrict mode‚Äù; als erste Zeile einer Funktion/Modules/Textfiles</li>
<li>Klassen verwenden automatisch strict mode</li>
</ul>
</section>
<section id="klassen" class="slide level2">
<h2>klassen</h2>
<ul>
<li>Klassen in ECMAScript6</li>
<li><a href="https://javascript.info/prototype-inheritance">Prototype inheritence</a>
<ul>
<li>Attack: <a href="https://portswigger.net/daily-swig/prototype-pollution-the-dangerous-and-underrated-vulnerability-impacting-javascript-applications">Prototype Pollution</a></li>
</ul></li>
</ul>
</section>
<section id="module" class="slide level2">
<h2>module</h2>
<p>Bibliothek, etc.:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// üìÅ sayHi.js</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">function</span> <span class="fu">sayHi</span>(user) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="vs">`Hello, </span><span class="sc">${</span>user<span class="sc">}</span><span class="vs">!`</span>)<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">not_exported</span>() {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// do something</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Aufrufer:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// üìÅ main.js</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {sayHi} <span class="im">from</span> <span class="st">&#39;./sayHi.js&#39;</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sayHi</span>(<span class="st">&#39;John&#39;</span>)<span class="op">;</span> <span class="co">// Hello, John!</span></span></code></pre></div>
</section>
<section id="asyncawait" class="slide level2">
<h2>async/await</h2>
<ul>
<li>single event-loop:
<ul>
<li>highly efficient, but stalls when waiting</li>
</ul></li>
<li>callback-hell
<ul>
<li>event loops (maybe use javascript.info)</li>
<li>Promises</li>
<li>Promise.all([‚Ä¶])</li>
<li>async/await</li>
</ul></li>
</ul>
</section>
<section id="future-typing" class="slide level2">
<h2>Future: typing?</h2>
<ul>
<li><a href="https://www.typescriptlang.org/docs/handbook/2/basic-types.html">Microsoft TypeScript</a></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greet</span>(person<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> date<span class="op">:</span> Date) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Hello </span><span class="sc">${</span>person<span class="sc">}</span><span class="vs">, today is </span><span class="sc">${</span>date<span class="op">.</span><span class="fu">toDateString</span>()<span class="sc">}</span><span class="vs">!`</span>)<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section></section>
<section>
<section id="api-design-restful" class="title-slide slide level1">
<h1>API Design? Restful</h1>

</section>
<section id="basic" class="slide level2">
<h2>Basic</h2>
<ul>
<li>mostly based upon <a href="https://opensource.zalando.com/restful-api-guidelines/">Zalando API and Event Guidelines</a></li>
</ul>
</section>
<section id="crud-functionality" class="slide level2">
<h2>CRUD Functionality</h2>
<ul>
<li>Typische Operationen die man f√ºr die Verwaltung von Resourcen ben√∂tigt</li>
<li>Create, Read, Update, Delete</li>
</ul>
</section>
<section id="restful-architectures" class="slide level2">
<h2>RESTful Architectures</h2>
<ul>
<li><a href="https://martinfowler.com/articles/richardsonMaturityModel.html#level2">Maturity Levels</a></li>
<li>Target: REST Maturity Level 2
<ul>
<li>Aufteilen auf Resourcen</li>
<li>Verwendung richtiger HTTP Verben</li>
<li>Verwendung richtiger HTTP Statuscodes</li>
<li>Keine Verben/Actions in der URL</li>
</ul></li>
</ul>
</section>
<section id="http-verben" class="slide level2">
<h2>HTTP Verben</h2>
<table>
<thead>
<tr class="header">
<th>Verb</th>
<th>Verwendung</th>
<th>Safe</th>
<th>Idempotent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET</td>
<td>Abfrage von Informationen</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>HEAD</td>
<td>Abfrage von Meta-Informationen</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="odd">
<td>OPTIONS</td>
<td>Abfrage von Meta-Informationen</td>
<td>x</td>
<td>x</td>
</tr>
<tr class="even">
<td>PUT</td>
<td>Neues Objekt hochladen</td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>DELETE</td>
<td>L√∂schen eines Objektes</td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>POST</td>
<td>Erstellen von Objekten</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>PATCH</td>
<td>Updaten eines Objektes</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="http-statuscode" class="slide level2">
<h2>HTTP Statuscode</h2>
<table>
<thead>
<tr class="header">
<th>Statuscode</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1xx</td>
<td>Information (continue, protocol switch)</td>
</tr>
<tr class="even">
<td>2xx</td>
<td>Erfolgreich</td>
</tr>
<tr class="odd">
<td>3xx</td>
<td>Umleitungen</td>
</tr>
<tr class="even">
<td>4xx</td>
<td>Client-Fehler (inkl.Authentication)</td>
</tr>
<tr class="odd">
<td>5xx</td>
<td>Server-Fehler</td>
</tr>
</tbody>
</table>
</section>
<section id="typische-antwortcodes-12" class="slide level2">
<h2>Typische Antwortcodes (1/2)</h2>
<table>
<thead>
<tr class="header">
<th>Statuscode</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>200</td>
<td>OK, Antwort im Body</td>
</tr>
<tr class="even">
<td>201</td>
<td>Created, Antwort im Body, URL als Location-Header</td>
</tr>
<tr class="odd">
<td>204</td>
<td>No Content (aber Header)</td>
</tr>
<tr class="even">
<td>301</td>
<td>Moved Permanently</td>
</tr>
<tr class="odd">
<td>302</td>
<td>Found (tempor√§re neue URL)</td>
</tr>
<tr class="even">
<td>303</td>
<td>See Other, e.g., f√ºr Status-Page nach POST</td>
</tr>
</tbody>
</table>
</section>
<section id="typische-antwortcodes-12-1" class="slide level2">
<h2>Typische Antwortcodes (1/2)</h2>
<table>
<thead>
<tr class="header">
<th>Statuscode</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>400</td>
<td>Bad Request (ung√ºltige Syntax)</td>
</tr>
<tr class="even">
<td>401</td>
<td>Unauthorized (Authentication notwendig)</td>
</tr>
<tr class="odd">
<td>403</td>
<td>Forbidden (Authorization notwendig)</td>
</tr>
<tr class="even">
<td>404</td>
<td>Not found</td>
</tr>
<tr class="odd">
<td>429</td>
<td>Too Many Requests (Rate-Limit)</td>
</tr>
<tr class="even">
<td>500</td>
<td>Internal Server Error</td>
</tr>
<tr class="odd">
<td>502/504</td>
<td>Bad Gateway</td>
</tr>
<tr class="even">
<td>503</td>
<td>Service Unavailable</td>
</tr>
</tbody>
</table>
</section>
<section id="resourcen" class="slide level2">
<h2>Resourcen</h2>
<ul>
<li>es gibt collection und singul√§re Resourcen
<ul>
<li>Collection z.B. /users/123</li>
<li>Singular z.B. /current-user</li>
</ul></li>
</ul>
</section>
<section id="restful-crud-functionality-collection" class="slide level2">
<h2>RESTful CRUD-Functionality (collection)</h2>
<table>
<thead>
<tr class="header">
<th>URL</th>
<th>Method</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>/notes/</td>
<td>GET</td>
<td>list notes</td>
</tr>
<tr class="even">
<td>/notes/</td>
<td>POST</td>
<td>create note</td>
</tr>
<tr class="odd">
<td>/notes/123</td>
<td>GET</td>
<td>show note</td>
</tr>
<tr class="even">
<td>/notes/123</td>
<td>DELETE</td>
<td>remove note</td>
</tr>
<tr class="odd">
<td>/notes/123</td>
<td>PUT</td>
<td>update note</td>
</tr>
</tbody>
</table>
</section>
<section id="restful-crud-functionality-singular" class="slide level2">
<h2>RESTful CRUD-Functionality (singular)</h2>
<table>
<thead>
<tr class="header">
<th>URL</th>
<th>Method</th>
<th>Operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>/session</td>
<td>GET</td>
<td>return session/user</td>
</tr>
<tr class="even">
<td>/session</td>
<td>POST</td>
<td>neue session anlegen</td>
</tr>
<tr class="odd">
<td>/session</td>
<td>PUT</td>
<td>session updaten</td>
</tr>
<tr class="even">
<td>/session</td>
<td>PATCH</td>
<td>session partiell updaten</td>
</tr>
<tr class="odd">
<td>/session</td>
<td>DELETE</td>
<td>session schlie√üen</td>
</tr>
</tbody>
</table>
</section>
<section id="resourcen-vs.-actions" class="slide level2">
<h2>Resourcen vs.¬†Actions</h2>
<ul>
<li>nicht ‚ÄúPOST /users/login‚Äù sondern ‚ÄúPOST /sessions/‚Äù</li>
<li>URL sollten ‚Äúverb-free‚Äù sein</li>
</ul>
</section>
<section id="naming-conventions" class="slide level2">
<h2>Naming-Conventions</h2>
<ul>
<li>Identifier m√ºssen ,,stable‚Äô‚Äô sein
<ul>
<li>z.B. /users/42 liefert immer den gleichen User</li>
</ul></li>
<li>Benamung
<ul>
<li>kebab-case f√ºr Pfade (alles Kleinbuchstaben)</li>
<li>snake_case f√ºr Parameter</li>
</ul></li>
</ul>
</section>
<section id="real-world-problems-for-non-apis" class="slide level2">
<h2>Real-World Problems for non-APIs</h2>
<ul>
<li>Links can only be GET</li>
<li>Forms can only submit GET/POST</li>
<li>Rest: JavaScript oder workarounds
<ul>
<li>/users/1/delete</li>
<li>/users/1/update</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="routing-bei-unserem-prototypen" class="title-slide slide level1">
<h1>Routing bei unserem Prototypen</h1>

</section>
<section id="umfang-der-applikation" class="slide level2">
<h2>Umfang der Applikation</h2>
<ul>
<li>simples Blog</li>
<li>Login f√ºr Admins</li>
<li>Admins k√∂nnen neue Blog-Posts anlegen)</li>
<li>Public Zugriff auf Blog-Posts</li>
</ul>
</section>
<section id="welche-resoucen" class="slide level2">
<h2>Welche Resoucen?</h2>
<ul>
<li>initial posts</li>
<li>sp√§ter sessions + admin</li>
</ul>
</section>
<section id="route-vorschlag-inital" class="slide level2">
<h2>Route-Vorschlag (inital)</h2>
<table>
<thead>
<tr class="header">
<th>Method</th>
<th>URL</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET</td>
<td>/</td>
<td>redirect to /posts</td>
</tr>
<tr class="even">
<td>GET</td>
<td>/posts</td>
<td>index</td>
</tr>
<tr class="odd">
<td>GET</td>
<td>/posts/:id</td>
<td>show</td>
</tr>
</tbody>
</table>
</section>
<section id="route-vorschlag-session" class="slide level2">
<h2>Route-Vorschlag (session)</h2>
<table>
<thead>
<tr class="header">
<th>Method</th>
<th>URL</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET</td>
<td>/session</td>
<td>login-dialog</td>
</tr>
<tr class="even">
<td>POST</td>
<td>/session</td>
<td>login</td>
</tr>
<tr class="odd">
<td>DELETE</td>
<td>/session</td>
<td>logout</td>
</tr>
<tr class="even">
<td>POST</td>
<td>/session/delete</td>
<td>logout</td>
</tr>
</tbody>
</table>
</section>
<section id="route-vorschlag-admin" class="slide level2">
<h2>Route-Vorschlag (admin)</h2>
<table>
<thead>
<tr class="header">
<th>Method</th>
<th>URL</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET</td>
<td>/admin</td>
<td>redirect to /admin/posts</td>
</tr>
<tr class="even">
<td>GET</td>
<td>/admin/posts</td>
<td>index</td>
</tr>
<tr class="odd">
<td>GET</td>
<td>/admin/posts/:id</td>
<td>show</td>
</tr>
<tr class="even">
<td>POST</td>
<td>/admin/posts</td>
<td>create</td>
</tr>
</tbody>
</table>
</section></section>
<section>
<section id="tooling-basics" class="title-slide slide level1">
<h1>Tooling Basics</h1>

</section>
<section id="git" class="slide level2">
<h2>git</h2>
<ul>
<li>basics: commits, branches
<ul>
<li>main should always compile/work (oder auch ‚Äúproduction‚Äù)</li>
<li>new features in feature-branches</li>
<li>typically: when a feature branch gets merged into ‚Äòmain‚Äô, perform unit tests/code review</li>
</ul></li>
<li>.gitignore f√ºr Dateien die nie eingecheckt werden sollten</li>
</ul>
</section>
<section id="node.js" class="slide level2">
<h2>node.js</h2>
<ul>
<li>Google V8 JavaScript-Engine</li>
<li>Verwendung ausserhalb des Browsers</li>
<li>‚Äúnpm‚Äù als Paketmanager</li>
</ul>
</section>
<section id="node.js-beispiel-mit-http-library" class="slide level2">
<h2>node.js Beispiel (mit http-Library)</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// import http from &quot;http&quot;;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> http <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;http&#39;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> hostname <span class="op">=</span> <span class="st">&#39;127.0.0.1&#39;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> port <span class="op">=</span> <span class="dv">3000</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> server <span class="op">=</span> http<span class="op">.</span><span class="fu">createServer</span>((req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="at">statusCode</span> <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">setHeader</span>(<span class="st">&#39;Content-Type&#39;</span><span class="op">,</span> <span class="st">&#39;text/plain&#39;</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">end</span>(<span class="st">&#39;Hello World</span><span class="sc">\n</span><span class="st">&#39;</span>)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>server<span class="op">.</span><span class="fu">listen</span>(port<span class="op">,</span> hostname<span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Server running at http://</span><span class="sc">${</span>hostname<span class="sc">}</span><span class="vs">:</span><span class="sc">${</span>port<span class="sc">}</span><span class="vs">/`</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
</section>
<section id="express.js" class="slide level2">
<h2>express.js</h2>
<ul>
<li>baut auf node.js auf</li>
<li>optimiert f√ºr Webapplikationen</li>
<li>talk about opiniated (Ruby on Rails) vs unopiniated (express.js) frameworks</li>
</ul>
</section>
<section id="express.js-beispiel" class="slide level2">
<h2>express.js Beispiel</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// import express from &quot;express&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> express <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;express&#39;</span>)<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> app <span class="op">=</span> <span class="fu">express</span>()<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> <span class="kw">function</span>(req<span class="op">,</span> res) {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">send</span>(<span class="st">&#39;Hello World!&#39;</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/ports/:id&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    re<span class="op">.</span><span class="fu">send</span>(<span class="st">&quot;Another Resource &quot;</span> <span class="op">+</span> req<span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> port <span class="op">=</span> <span class="dv">3000</span><span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">listen</span>(port<span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Example app listening on port </span><span class="sc">${</span>port<span class="sc">}</span><span class="vs">!`</span>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</section>
<section id="express.js-1" class="slide level2">
<h2>express.js</h2>
<ul>
<li>relativ minimales framework</li>
<li>mit plugins erweiterbar</li>
<li>middleware</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> express <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;express&#39;</span>)<span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> app <span class="op">=</span> <span class="fu">express</span>()<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">// An example middleware function</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a_middleware_function <span class="op">=</span> <span class="kw">function</span>(req<span class="op">,</span> res<span class="op">,</span> next) {</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ... perform some operations</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">next</span>()<span class="op">;</span> <span class="co">// Call next() so Express will call the next middleware function in the chain.</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Function added with use() for all routes and verbs</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(a_middleware_function)<span class="op">;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Function added with use() for a specific route</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(<span class="st">&#39;/someroute&#39;</span><span class="op">,</span> a_middleware_function)<span class="op">;</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">// A middleware function added for a specific HTTP verb and route</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/&#39;</span><span class="op">,</span> a_middleware_function)<span class="op">;</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">listen</span>(<span class="dv">3000</span>)<span class="op">;</span></span></code></pre></div>
</section></section>
<section>
<section id="stage-1-start-with-simple-blog-posts" class="title-slide slide level1">
<h1>Stage 1: start with simple blog posts</h1>

</section>
<section id="todos" class="slide level2">
<h2>TODOs</h2>
<ul>
<li>create git repository</li>
<li>setup npm</li>
<li>initially:
<ul>
<li>alles im controller</li>
<li>move business logic into services</li>
<li>move storage into models</li>
</ul></li>
<li>storage in memory</li>
<li>unit tests f√ºr storage</li>
<li>npm audit, github itself</li>
</ul>
</section>
<section id="security-review" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>explicit routing (protection against file-upload attacks)</li>
<li>protection against supply-chain attacks (npm audit, github dependabot)</li>
<li>maybe talk about ‚Äúnpm audit‚Äù vs.¬†<a href="https://dependencytrack.org/">OWASP dependency-track</a></li>
</ul>
</section></section>
<section>
<section id="stage-2-initial-security-integration" class="title-slide slide level1">
<h1>Stage 2: initial security integration</h1>

</section>
<section id="todo" class="slide level2">
<h2>TODO</h2>
<ul>
<li>CI: gitlab-actions integrieren</li>
<li>add SAST tooling (semgrep)</li>
<li>dotenv in express.js</li>
<li>add .gitignore</li>
<li>CD: howto automatically deploy this? -&gt; heroku</li>
</ul>
</section>
<section id="security-review-1" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>keine secrets/magic numbers im source code (externalized configuration)</li>
<li>automated testing (business logic)</li>
<li>automated SAST testing</li>
<li>automated deployment (keine Schlampigkeitsfehler)</li>
</ul>
</section></section>
<section>
<section id="vorlesungseinheit-2" class="title-slide slide level1">
<h1>Vorlesungseinheit 2</h1>

</section>
<section id="starting-with.." class="slide level2">
<h2>Starting with..</h2>
<ul>
<li>covid check</li>
<li>talk about <a href="https://certitude.consulting/blog/en/invisible-backdoor/">invisible backdoors</a>..</li>
<li>talk about recent NPM problems</li>
<li>Future path
<ul>
<li>OAuth2 API</li>
<li><a href="https://sailsjs.com/">Sails.js</a></li>
<li>Code Reviews</li>
</ul></li>
</ul>
</section>
<section id="the-code" class="slide level2">
<h2>The Code</h2>
<ul>
<li>renamed introduction.js to introduction_to_js.txt</li>
<li>added github code-check</li>
<li>Object.freeze vs.¬†Object.seal</li>
<li>kurzes Review was bis jetzt passierte</li>
</ul>
</section></section>
<section>
<section id="stage-3-improve-rendering" class="title-slide slide level1">
<h1>Stage 3: Improve Rendering</h1>

</section>
<section id="todo-14" class="slide level2">
<h2>TODO 1/4</h2>
<ul>
<li>add views + layouts (ejs)</li>
<li>talk about encoding</li>
<li>mention middleware</li>
</ul>
</section>
<section id="security-review-2" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>now we have our initial output escaping/quoting (at least for HTML)</li>
</ul>
</section>
<section id="todo-24" class="slide level2">
<h2>TODO 2/4</h2>
<ul>
<li>add HTTP headers through helmet</li>
</ul>
</section>
<section id="security-review-3" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>we added some security-specific HTTP Headers</li>
</ul>
</section>
<section id="todo-34" class="slide level2">
<h2>TODO 3/4</h2>
<ul>
<li>add integration tests</li>
<li>Tests that work on the ‚Äúfinal‚Äù application</li>
</ul>
</section>
<section id="security-review-4" class="slide level2">
<h2>Security Review</h2>
<ul>
<li>Testen der Verf√ºgbarkeit</li>
</ul>
</section>
<section id="todo-44" class="slide level2">
<h2>TODO 4/4</h2>
<ul>
<li>add bootstrap</li>
</ul>
</section>
<section id="security-review-5" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>used npm for this -&gt; bootstrap version is included in ‚Äúnpm audit‚Äù</li>
</ul>
</section></section>
<section>
<section id="stage-4-add-authentication" class="title-slide slide level1">
<h1>stage 4: add authentication</h1>

</section>
<section id="preparation" class="slide level2">
<h2>Preparation</h2>
<ul>
<li>add users</li>
<li>add units tests for users</li>
</ul>
</section>
<section id="todo-1" class="slide level2">
<h2>TODO</h2>
<ul>
<li>add sessions (and session controller)</li>
<li>create a sessions-controller</li>
<li>add express.urlencoded();</li>
<li>add system-wide authentication</li>
</ul>
</section>
<section id="security-review-6" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>use pdkdf</li>
<li>set secure-ish session cookie flags</li>
<li>regenerate session on login</li>
<li>add system-wide authentication</li>
</ul>
</section>
<section id="todo-2" class="slide level2">
<h2>TODO</h2>
<ul>
<li>add rate-limits</li>
</ul>
</section>
<section id="security-review-7" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>added rate-limits</li>
</ul>
</section></section>
<section>
<section id="stage-5-add-admin-area" class="title-slide slide level1">
<h1>Stage 5: add admin area</h1>

</section>
<section id="preparation-1" class="slide level2">
<h2>Preparation</h2>
<ul>
<li>add admin route</li>
<li>remove authentication for /posts<br />
</li>
<li>cleanup: move controller logic into /controllers</li>
</ul>
</section>
<section id="todo-3" class="slide level2">
<h2>TODO</h2>
<ul>
<li>add some admin-features
<ul>
<li>allow creation of new posts</li>
</ul></li>
<li>add input validation</li>
<li>add logout..</li>
<li>add CSRF protection with csurf</li>
<li>add a simple authentication test</li>
</ul>
</section>
<section id="security-review-8" class="slide level2">
<h2>Security Review</h2>
<ul>
<li>CSRF validation</li>
<li>input validation</li>
<li>test-cases / abuse-cases</li>
</ul>
</section></section>
<section>
<section id="stage-6-switch-to-relational-database" class="title-slide slide level1">
<h1>Stage 6: switch to relational database</h1>

</section>
<section id="preparation-2" class="slide level2">
<h2>Preparation</h2>
<ul>
<li>introduce DataManager</li>
</ul>
</section>
<section id="todo-4" class="slide level2">
<h2>TODO</h2>
<ul>
<li>create a Sqlite DataManager</li>
<li>create Testcases</li>
</ul>
</section>
<section id="security-review-9" class="slide level2">
<h2>Security-Review</h2>
<ul>
<li>prepared statements</li>
<li>test with sqlmap</li>
</ul>
</section></section>
<section id="the-future.." class="title-slide slide level1">
<h1>The Future..</h1>
<ul>
<li>check API? Talk about DTOs</li>
<li>create a separate API?
<ul>
<li>OAuth2 (https://github.com/oauthjs/express-oauth-server/blob/master/examples/memory/model.js)</li>
<li>react oder angular.js?</li>
</ul></li>
<li>do the same using passport</li>
</ul>
</section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@^4//dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="https://unpkg.com/reveal.js@^4//plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: false,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
